(function(){window.app=angular.module("multifinderApp",["multifinderApp.directives","$strap.directives"]).config(["$routeProvider",function(a){return a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}])}).call(this),function(){app.controller("MainCtrl",["$scope","$http","preprocess",function(a,b,c){var d,e;return a.datasets=[{name:"example"},{name:"Basketball"},{name:"Medical"}],e={},a.categories=[],a.selectedDataset=a.datasets[0],a.data=[],a.records=[],a.splitAttribute=!1,a.groups=[[],[]],a.$watch("selectedDataset",function(a){return d(a.name),a}),d=function(c){return b.get("datasets/"+c+".json").success(function(b){return a.data=b})},a.$watch("data",function(a,b,d){return console.log("data trigger"),d.categories=c.firstPass(a,d.records)}),a.$watch("splitAttribute",function(){return console.log("split update")}),b.get("datasets/basicAreaChart.json").success(function(b){return a.basicAreaChart=b}),a.setRefEvt=function(a){return e[a]?(delete e[a],console.log("deselected "+a)):(Object.keys(e).length>=2?(console.log("replaced "+Object.keys(e)[1]+" with "+a),delete e[Object.keys(e)[1]]):console.log("selected "+a),e[a]=!0)}}])}.call(this),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};app.service("preprocess",function(){return this.firstPass=function(b,c){var d,e,f,g,h,i,j,k,l,m,n,o;if(console.log("preprocess reached"),g={},b.events){for(d={},m=b.events,i=0,k=m.length;k>i;i++)e=m[i],n=e.event,a.call(d,n)<0&&(d[e.event]=!0),e.ts&&(e.ts=moment(e.ts),e.te&&(e.te=moment(e.te))),o=e.id,a.call(g,o)>=0?(f=g[e.id],f.push(e)):(f=[e],g[e.id]=f);for(j=0,l=g.length;l>j;j++)h=g[j],f=g[h],f.sort(function(a,b){return a.ts>b.ts?1:b.ts>a.ts?-1:0}),c.push(g[h]);return d=Object.keys(d),d.sort()}}})}.call(this),function(){"use strict";angular.module("multifinderApp.directives",[]).directive("chart",function(){return{restrict:"E",template:"<div></div>",scope:{chartData:"=value"},transclude:!0,replace:!0,link:function(a,b,c){var d;return d={chart:{renderTo:b[0],type:c.type||null,height:c.height||null,width:c.width||null}},a.$watch(function(){return a.chartData},function(b){var c,e,f;return b?(e=!0,f={},$.extend(e,f,d,a.chartData),c=new Highcharts.Chart(f)):void 0})}}})}.call(this);